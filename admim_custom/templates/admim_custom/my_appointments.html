{% extends "base.html" %}

{% block title %}üìÖ –ó–∞—è–≤–∫–∏ –∫ –º–æ–∏–º –≤—Ä–∞—á–∞–º ‚Äî MEDHUB.TJ{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2 class="mb-4">üìÖ –ó–∞—è–≤–∫–∏ –∫ –º–æ–∏–º –≤—Ä–∞—á–∞–º</h2>

  <!-- –¢–∞–±–ª–∏—Ü–∞ –∑–∞—è–≤–æ–∫ -->
  <details open>
    <summary class="summary-toggle h5 mb-2">üìã –°–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫</summary>
    <div class="table-responsive mt-3">
      <table class="table table-bordered table-striped align-middle">
        <thead class="table-light">
          <tr>
            <th>üë§ –ü–∞—Ü–∏–µ–Ω—Ç</th>
            <th>üßë‚Äç‚öïÔ∏è –í—Ä–∞—á</th>
            <th>üìå –°—Ç–∞—Ç—É—Å</th>
            <th>üïí –î–∞—Ç–∞</th>
          </tr>
        </thead>
        <tbody>
          {% for app in appointments %}
          <tr>
            <td>{{ app.patient.get_full_name }}</td>
            <td>{{ app.doctor.get_full_name }}</td>
            <td>
              <span class="badge d-inline-flex align-items-center 
                {% if app.status == 'accepted' %}bg-success
                {% elif app.status == 'pending' %}bg-warning text-dark
                {% elif app.status == 'rejected' %}bg-danger
                {% else %}bg-secondary{% endif %}">
                {% if app.status == 'accepted' %}
                  ‚úÖ –ü—Ä–∏–Ω—è—Ç–∞
                {% elif app.status == 'pending' %}
                  ‚è≥ –í –æ–∂–∏–¥–∞–Ω–∏–∏
                {% elif app.status == 'rejected' %}
                  ‚ùå –û—Ç–∫–ª–æ–Ω–µ–Ω–∞
                {% else %}
                  ‚ùî –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ
                {% endif %}
              </span>
            </td>
            <td>{{ app.created_at|date:"d.m.Y H:i" }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="4" class="text-center text-muted">–ù–µ—Ç –∑–∞—è–≤–æ–∫</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </details>
</div>

<!-- –°—Ç–∏–ª–∏ –¥–ª—è summary -->
<style>
  .summary-toggle {
    cursor: pointer;
    user-select: none;
    list-style: none;
  }
  details > summary::-webkit-details-marker {
    display: none;
  }
  details > summary::before {
    content: "‚ñ∏";
    display: inline-block;
    margin-right: 8px;
    transition: transform 0.2s ease;
  }
  details[open] > summary::before {
    transform: rotate(90deg);
  }
</style>
{% endblock %}
