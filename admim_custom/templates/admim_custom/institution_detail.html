{% extends "base.html" %}

{% block title %}ğŸ¥ {{ institution.name }} â€” MEDHUB.TJ{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2 class="mb-3">ğŸ¥ {{ institution.name }}</h2>

  <!-- Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾Ğ± ÑƒÑ‡Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ğ¸ -->
  <details open class="mb-4">
    <summary class="summary-toggle h5">ğŸ“Œ Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾Ğ± ÑƒÑ‡Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ğ¸</summary>
    <div class="mt-3">
      <p><strong>Ğ¢Ğ¸Ğ¿:</strong> {{ institution.get_institution_type_display }}</p>
      <p><strong>Ğ ĞµĞ³Ğ¸Ğ¾Ğ½:</strong> {{ institution.region }}</p>
      <p><strong>Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:</strong>
        <span class="badge {% if institution.is_active %}bg-success{% else %}bg-secondary{% endif %}">
          {{ institution.is_active|yesno:"ĞĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾,ĞĞµĞ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾" }}
        </span>
      </p>
    </div>
  </details>

  <!-- ĞÑ‚Ğ´ĞµĞ»ĞµĞ½Ğ¸Ñ -->
  <details open class="mb-4">
    <summary class="summary-toggle h5">ğŸ“‚ ĞÑ‚Ğ´ĞµĞ»ĞµĞ½Ğ¸Ñ</summary>
    <ul class="list-group mt-3">
      {% for dept in departments %}
        <li class="list-group-item">ğŸ¬ {{ dept.name }}</li>
      {% empty %}
        <li class="list-group-item text-muted">ĞĞµÑ‚ Ğ¾Ñ‚Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğ¹</li>
      {% endfor %}
    </ul>
  </details>

  <!-- Ğ’Ñ€Ğ°Ñ‡Ğ¸ -->
  <details open class="mb-4">
    <summary class="summary-toggle h5">ğŸ§‘â€âš•ï¸ Ğ’Ñ€Ğ°Ñ‡Ğ¸</summary>
    <ul class="list-group mt-3">
      {% for doctor in doctors %}
        <li class="list-group-item">
          ğŸ‘¨â€âš•ï¸ {{ doctor.get_full_name }} â€” <span class="text-muted">ğŸ“ {{ doctor.phone_number }}</span>
        </li>
      {% empty %}
        <li class="list-group-item text-muted">ĞĞµÑ‚ Ğ²Ñ€Ğ°Ñ‡ĞµĞ¹</li>
      {% endfor %}
    </ul>
  </details>

  <!-- Ğ—Ğ°ÑĞ²ĞºĞ¸ -->
  <details open class="mb-4">
    <summary class="summary-toggle h5">ğŸ“… Ğ—Ğ°ÑĞ²ĞºĞ¸</summary>
    <ul class="list-group mt-3">
      {% for app in appointments %}
        <li class="list-group-item">
          ğŸ™ {{ app.patient }} â†’ ğŸ§‘â€âš•ï¸ {{ app.doctor }}
          <span class="badge bg-info text-dark">{{ app.status }}</span>
        </li>
      {% empty %}
        <li class="list-group-item text-muted">ĞĞµÑ‚ Ğ·Ğ°ÑĞ²Ğ¾Ğº</li>
      {% endfor %}
    </ul>
  </details>

  <!-- ĞÑ‚Ğ·Ñ‹Ğ²Ñ‹ -->
  <details open class="mb-5">
    <summary class="summary-toggle h5">ğŸ“ ĞÑ‚Ğ·Ñ‹Ğ²Ñ‹</summary>
    <ul class="list-group mt-3">
      {% for review in reviews %}
        <li class="list-group-item">
          ğŸ™ {{ review.appointment.patient }} â†’ ğŸ§‘â€âš•ï¸ {{ review.appointment.doctor }}:
          <strong>{{ review.rating }} â˜…</strong>
        </li>
      {% empty %}
        <li class="list-group-item text-muted">ĞĞµÑ‚ Ğ¾Ñ‚Ğ·Ñ‹Ğ²Ğ¾Ğ²</li>
      {% endfor %}
    </ul>
  </details>
</div>

<!-- Ğ¡Ñ‚Ğ¸Ğ»Ğ¸ Ğ´Ğ»Ñ summary -->
<style>
  .summary-toggle {
    cursor: pointer;
    user-select: none;
    list-style: none;
  }
  details > summary::-webkit-details-marker {
    display: none;
  }
  details > summary::before {
    content: "â–¸";
    display: inline-block;
    margin-right: 8px;
    transition: transform 0.2s ease;
  }
  details[open] > summary::before {
    transform: rotate(90deg);
  }
</style>
{% endblock %}
