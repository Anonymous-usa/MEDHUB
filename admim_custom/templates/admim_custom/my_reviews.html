{% extends "base.html" %}

{% block title %}📝 Отзывы на моих врачей — MEDHUB.TJ{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2 class="mb-4">📝 Отзывы на моих врачей</h2>

  <!-- Список отзывов -->
  <details open>
    <summary class="summary-toggle h5 mb-2">📋 Список отзывов</summary>
    <div class="table-responsive mt-3">
      <table class="table table-bordered table-striped align-middle">
        <thead class="table-light">
          <tr>
            <th>👤 Пациент</th>
            <th>🧑‍⚕️ Врач</th>
            <th>⭐ Рейтинг</th>
            <th>💬 Комментарий</th>
            <th>🕒 Дата</th>
          </tr>
        </thead>
        <tbody>
          {% for review in reviews %}
          <tr>
            <td>{{ review.appointment.patient.get_full_name }}</td>
            <td>{{ review.appointment.doctor.get_full_name }}</td>
            <td><strong>{{ review.rating }} ★</strong></td>
            <td>{{ review.comment|default:"—" }}</td>
            <td>{{ review.created_at|date:"d.m.Y H:i" }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="5" class="text-center text-muted">Нет отзывов</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </details>
</div>

<!-- Стили для summary -->
<style>
  .summary-toggle {
    cursor: pointer;
    user-select: none;
    list-style: none;
  }
  details > summary::-webkit-details-marker {
    display: none;
  }
  details > summary::before {
    content: "▸";
    display: inline-block;
    margin-right: 8px;
    transition: transform 0.2s ease;
  }
  details[open] > summary::before {
    transform: rotate(90deg);
  }
</style>
{% endblock %}
