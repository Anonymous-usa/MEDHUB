{% extends "base.html" %}

{% block title %}üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2 class="mb-4">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã</h2>

  <table class="table table-bordered table-striped">
    <thead class="table-light">
      <tr>
        <th>–ú–µ—Ç—Ä–∏–∫–∞</th>
        <th>–ó–Ω–∞—á–µ–Ω–∏–µ</th>
      </tr>
    </thead>
    <tbody>
      <tr><td>–í—Å–µ–≥–æ –∑–∞—è–≤–æ–∫</td><td>{{ stats.appointments_total }}</td></tr>
      <tr><td>–ü—Ä–∏–Ω—è—Ç—ã–µ –∑–∞—è–≤–∫–∏</td><td>{{ stats.appointments_accepted }}</td></tr>
      <tr><td>–û–∂–∏–¥–∞—é—â–∏–µ –∑–∞—è–≤–∫–∏</td><td>{{ stats.appointments_pending }}</td></tr>
      <tr><td>–û—Ç–∫–ª–æ–Ω—ë–Ω–Ω—ã–µ –∑–∞—è–≤–∫–∏</td><td>{{ stats.appointments_rejected }}</td></tr>
      <tr><td>–í—Å–µ–≥–æ —É—á—Ä–µ–∂–¥–µ–Ω–∏–π</td><td>{{ stats.institutions_total }}</td></tr>
      <tr><td>–í—Å–µ–≥–æ –≤—Ä–∞—á–µ–π</td><td>{{ stats.doctors_total }}</td></tr>
      <tr><td>–í—Å–µ–≥–æ –æ—Ç–∑—ã–≤–æ–≤</td><td>{{ stats.reviews_total }}</td></tr>
    </tbody>
  </table>

  <h4 class="mt-5">üìà –ó–∞—è–≤–∫–∏ –ø–æ —Å—Ç–∞—Ç—É—Å—É</h4>
  <canvas id="appointmentsChart" width="400" height="200"></canvas>
</div>

<!-- Add Chart.js library -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ctx = document.getElementById('appointmentsChart').getContext('2d');
  const appointmentsChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: ['–ü—Ä–∏–Ω—è—Ç—ã–µ', '–û–∂–∏–¥–∞—é—â–∏–µ', '–û—Ç–∫–ª–æ–Ω—ë–Ω–Ω—ã–µ'],
      datasets: [{
        label: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞—è–≤–æ–∫',
        data: [
          {{ stats.appointments_accepted }},
          {{ stats.appointments_pending }},
          {{ stats.appointments_rejected }}
        ],
        backgroundColor: ['#198754', '#ffc107', '#dc3545'],
        borderWidth: 1
      }]
    },
    options: {
      scales: {
        y: { beginAtZero: true }
      }
    }
  });
</script>
{% endblock %}
